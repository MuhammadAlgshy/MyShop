@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<ul id="products-list"></ul>

@section Scripts{
    <script>
        let url = "https://localhost:7015/api/v1/products";
        let productlist = document.getElementById("products-list");
fetch(url)
        .then(response => response.json())
        .then (data => showProducts(data))
        .catch(ex=>{
            alert("Error!");
            console.error(ex);
        });

function showProducts(products){

    products.forEach(product => 
    {
        let li = document.createElement("li");
        let text = `${product.name} (\$${product.price})`;
        li.appendChild(document.createTextNode(text));
        productlist.appendChild(li);
    });
}


    </script>
}
